AMQP Services for Tupelo
========================

The AMQP portion of the Tupelo Codebase is further organized as a
three module Maven build.  The three modules are

 * objects - Objects, either transmitted natively as Java serialized
objects, or more likely serialized as JSON objects.  Communicated over
the (amqp) wire between client and server programs (via the broker of
course).  A FileHashQuery, sent by a client (see below) is a JSON pair:

{ "algorithm" : "md5", "hashes" : [ "hash1hex", "hash2hex" ] }

The query thus captures the info in the question "Who has a file with
any of these md5 hashes?"

The FileHashResponse, generated by some Tupelo AMQP service (see server below) has this JSON format:

{"algorithm":"md5","hits":[{"hash":"0000000000000000000000000000000000000000","descriptor":{"diskID":"seagate1234","session":"03935175-e703-4f17-90d1-d25dc4b08fb5/20141104.0016"},"path":"/"}]}

This response says "A disk image managed by Tupelo contains a file
"/foo" with hash 0000.....  Associated with that disk image is a
descriptor which is a pair: diskID (identifying WHAT) and a sessionID
(identifying WHEN).  Note how the "hits" member is an array, since
there could be many hits for a single hash, and many hits for many
hashes.


* client - 'Requesting' programs.  A Tupelo client in this respect is
just a program wanting an 'answer' from some service attached in some
way to a Tupelo store.  An example query might be 'anyone have a disk
containing this md5 hash?'

* server - 'Answering' programs.  A Tupelo server in this respect is
just a program willing/able to respond to a request it sees on the
message bus.  A server will need access to one or even many Tupelo
stores, either a filesystem-local store or a web-accessible store.  An
example server program is one answering yes/no to the above example
client query.

